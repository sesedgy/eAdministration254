<div class="page-header">
    <h1>
        Преподаватели
        <small>
            <i class="ace-icon fa fa-angle-double-right"></i>
            Личная карточка преподавателя
        </small>
    </h1>
</div><!-- /.page-header -->

<div class="row">
    <div class="col-xs-12">
        <div class="col-xs-12 col-sm-3 center">
            <span class="profile-picture">
                <img class="editable img-responsive" alt="Фото отсутствует" id="avatar" style="height: 200px" src="{{photoSrc}}">
            </span>
            <div class="space-4"></div>
            <div class="width-80 label label-info label-xlg arrowed-in arrowed-in-right">
                <div class="inline position-relative">{{name}}</div>
            </div>
            <div class="hr hr12 dotted"></div>
            <div [hidden]="isCreateNew">
                <button class="btn width-80 btn-sm btn-success" (click)="saveChanges()"
                        [disabled]="!((lastName.valid && firstName.valid && emailValid.valid && userNameValid.valid && (passwordValid.valid || !isCreateNew))
                            && (faculty.valid && !(isCreateNew && faculty.valid && faculty.pristine)))">
                    <i class="ace-icon fa fa-floppy-o bigger-120"></i>
                    <span class="bigger-110">Сохранить изменения</span>
                </button>
                <div class="hr hr12 dotted"></div>
                <button class="btn width-80 btn-sm btn-danger" (click)="deleteRecord()">
                    <i class="ace-icon fa fa-trash bigger-120"></i>
                    <span class="bigger-110">Удалить</span>
                </button>
            </div>
            <div [hidden]="!isCreateNew">
                <button class="btn width-80 btn-sm btn-success" (click)="createNew()"
                        [disabled]="!((lastName.valid && firstName.valid && emailValid.valid && userNameValid.valid && (passwordValid.valid || !isCreateNew))
                            && (faculty.valid && !(isCreateNew && faculty.valid && faculty.pristine)))">
                    <i class="ace-icon fa fa-plus bigger-120"></i>
                    <span class="bigger-110">Создать</span>
                </button>
            </div>
            <div [hidden]="((lastName.valid && firstName.valid && emailValid.valid && userNameValid.valid && (passwordValid.valid || !isCreateNew))
                            && (faculty.valid && !(isCreateNew && faculty.valid && faculty.pristine)))">
                <div class="hr hr12 dotted"></div>
                <div class="well">
                    <h4 class="red smaller lighter">Необходимо заполнить поля отмеченные красным</h4>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-9">
            <div class="tabbable">
                <ul class="nav nav-tabs" id="myTab">
                    <li class="active">
                        <a data-toggle="tab" href="#personalInfo">
                            <i class="ace-icon fa fa-address-card-o bigger-120"
                               [ngClass]="(lastName.valid && firstName.valid && emailValid.valid && userNameValid.valid && (passwordValid.valid || !isCreateNew))? 'blue':'red'"></i>
                            Личная информация
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#documents">
                            <i class="blue ace-icon fa fa-briefcase bigger-120"></i>
                            Документы
                        </a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#workInfo">
                            <i class="ace-icon fa fa-users bigger-120"
                               [ngClass]="(faculty.valid && !(isCreateNew && faculty.valid && faculty.pristine)) ? 'blue':'red'"></i>
                            Рабочая информация
                        </a>
                    </li>
                    <li [ngStyle]="isCreateNew ? {'visibility':'hidden'} : {}">
                        <a data-toggle="tab" href="#load">
                            <i class="ace-icon fa fa-balance-scale bigger-120 blue"></i>
                            Нагрузка
                        </a>
                    </li>
                </ul>

                <div class="tab-content">

                    <div id="personalInfo" class="tab-pane fade in active">
                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Основная информация</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group" [ngClass]="lastName.valid ? '':'has-error'">
                                    <label for="lastName">Фамилия</label>
                                    <div>
                                        <input id="lastName" name="lastName" class="col-xs-12" type="text" [(ngModel)]="teacher.LastName" #lastName="ngModel" required/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group" [ngClass]="firstName.valid ? '':'has-error'">
                                    <label for="firstName">Имя</label>
                                    <div>
                                        <input id="firstName" name="firstName" class="col-xs-12" type="text" [(ngModel)]="teacher.FirstName" #firstName="ngModel" required/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="middleName">Отчество</label>
                                    <div>
                                        <input id="middleName" name="middleName" class="col-xs-12" type="text" [(ngModel)]="teacher.MiddleName"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="birthDate">Дата рождения</label>
                                    <div>
                                        <input id="birthDate" name="birthDate" class="col-xs-12" type="date" [(ngModel)]="teacher.BirthDate"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="mobilePhone">Мобильный телефон</label>
                                    <div>
                                        <input id="mobilePhone" name="mobilePhone" class="col-xs-12 input-mask-phone" type="text" [(ngModel)]="teacher.MobilePhone"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="citizenship">Гражданство</label>
                                    <div>
                                        <select id="citizenship" name="citizenship" class="col-xs-12" type="text" [(ngModel)]="teacher.Citizenship">
                                            <option value=""></option>
                                            <option value="РФ">РФ</option>
                                            <option value="Беларуссия">Беларуссия</option>
                                            <option value="Украина">Украина</option>
                                            <option value="Другое">Другое</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="sex">Пол</label>
                                    <div>
                                        <select id="sex" name="sex" class="col-xs-12" type="text" [(ngModel)]="teacher.Sex" required>
                                            <option value=""></option>
                                            <option value="Мусжкой">Мужской</option>
                                            <option value="Женский">Женский</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-6 col-sm-6">
                                <h4 class="header blue bolder smaller">Данные аккаунта</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal">
                                    <div class="form-group" [ngClass]="emailValid.valid ? '':'has-error'">
                                        <div class="col-xs-12">
                                            <input name="email" class="col-xs-12 col-md-6 col-lg-3" type="email" [(ngModel)]="email" placeholder="Email" #emailValid="ngModel" [readonly]="!isCreateNew" required/>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="hr"></div>
                        <div class="row">
                            <div class="col-xs-12">
                                <form class="form-horizontal">
                                    <div class="form-group" [ngClass]="userNameValid.valid ? '':'has-error'">
                                        <div class="col-xs-12">
                                            <input name="userName" class="col-xs-12 col-md-6 col-lg-3" type="text" [(ngModel)]="userName" placeholder="Логин" #userNameValid="ngModel" [readonly]="!isCreateNew" required/>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="hr" [hidden]="!isCreateNew"></div>
                        <div class="row" [hidden]="!isCreateNew">
                            <div class="col-xs-12">
                                <form class="form-horizontal">
                                    <div class="form-group" [ngClass]="passwordValid.valid ? '':'has-error'">
                                        <div class="col-xs-12">
                                            <input name="newPassword" class="col-xs-12 col-md-6 col-lg-3" type="password" [(ngModel)]="newPassword" placeholder="Пароль" #passwordValid="ngModel" required/>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div id="documents" class="tab-pane fade">
                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Паспортные данные</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="passportSeries">Серия</label>
                                    <div>
                                        <input id="passportSeries" name="passportSeries" class="col-xs-12" type="text" [(ngModel)]="teacher.PassportSeries"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="passportNumber">Номер</label>
                                    <div>
                                        <input id="passportNumber" name="passportNumber" class="col-xs-12" type="text" [(ngModel)]="teacher.PassportNumber"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="passportDate">Дата выдачи</label>
                                    <div>
                                        <input id="passportDate" name="passportDate" class="col-xs-12" type="date" [(ngModel)]="teacher.PassportDate"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group">
                                    <label for="passportIssueOrg">Кем выдан</label>
                                    <div>
                                        <input id="passportIssueOrg" name="passportIssueOrg" class="col-xs-12" type="text" [(ngModel)]="teacher.PassportIssueOrg"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Адрес прописки</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="countryRegistration">Страна</label>
                                    <div>
                                        <select id="countryRegistration" name="countryRegistration"
                                                class="col-xs-12" [(ngModel)]="teacher.CountryRegistration">
                                            <option value=""></option>
                                            <option value="Россия">Россия</option>
                                            <option value="Абхазия">Абхазия</option>
                                            <option value="Азербайджан">Азербайджан</option>
                                            <option value="Беларусия">Беларусия</option>
                                            <option value="Грузия">Грузия</option>
                                            <option value="Казахстан">Казахстан</option>
                                            <option value="Украина">Украина</option>
                                            <option value="Узбекистан">Узбекистан</option>
                                            <option value="Другое">Другое</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-3">
                                <div class="form-group">
                                    <label for="cityRegistration">Город</label>
                                    <div>
                                        <input id="cityRegistration" name="cityRegistration" class="col-xs-12"
                                               type="text" [(ngModel)]="teacher.CityRegistration"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="regionRegistration">Область</label>
                                    <div>
                                        <input id="regionRegistration" name="regionRegistration" class="col-xs-12"
                                               type="text" [(ngModel)]="teacher.RegionRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="districtRegistration">Район</label>
                                    <div>
                                        <input id="districtRegistration" name="districtRegistration" class="col-xs-12"
                                               type="text" [(ngModel)]="teacher.DistrictRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="localityRegistration">Населенный пункт</label>
                                    <div>
                                        <input id="localityRegistration" name="localityRegistration" class="col-xs-12"
                                               type="text" [(ngModel)]="teacher.LocalityRegistration"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="streetRegistration">Улица</label>
                                    <div>
                                        <input id="streetRegistration" name="streetRegistration" class="col-xs-12"
                                               type="text" [(ngModel)]="teacher.StreetRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="houseRegistration">Дом</label>
                                    <div>
                                        <input id="houseRegistration" name="houseRegistration" class="col-xs-12" type="text" [(ngModel)]="teacher.HouseRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="buildingRegistration">Строение</label>
                                    <div>
                                        <input id="buildingRegistration" name="buildingRegistration" class="col-xs-12" type="text" [(ngModel)]="teacher.BuildingRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="housingRegistration">Корпус</label>
                                    <div>
                                        <input id="housingRegistration" name="housingRegistration" class="col-xs-12" type="text" [(ngModel)]="teacher.HousingRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="flatRegistration">Квартира</label>
                                    <div>
                                        <input id="flatRegistration" name="flatRegistration" class="col-xs-12" type="text" [(ngModel)]="teacher.FlatRegistration"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-2">
                                <div class="form-group">
                                    <label for="indexRegistration">Индекс</label>
                                    <div>
                                        <input id="indexRegistration" name="indexRegistration" class="col-xs-12" type="text" [(ngModel)]="teacher.IndexRegistration"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Документ об образовании</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="seriesEducationDocument">Серия</label>
                                    <div>
                                        <input id="seriesEducationDocument" name="seriesEducationDocument" class="col-xs-12" type="text" [(ngModel)]="teacher.SeriesEducationDocument"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="numberEducationDocument">Номер</label>
                                    <div>
                                        <input id="numberEducationDocument" name="numberEducationDocument" class="col-xs-12" type="text" [(ngModel)]="teacher.NumberEducationDocument"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-4 col-md-3">
                                <div class="form-group">
                                    <label for="dateEducationDocument">Дата выдачи</label>
                                    <div>
                                        <input id="dateEducationDocument" name="dateEducationDocument" class="col-xs-12" type="date" [(ngModel)]="teacher.DateEducationDocument"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-md-12">
                                <div class="form-group">
                                    <label for="whoGiveEducationDocument">Кем выдан</label>
                                    <div>
                                        <input id="whoGiveEducationDocument" name="whoGiveEducationDocument" class="col-xs-12" type="text" [(ngModel)]="teacher.WhoGiveEducationDocument"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Другие документы</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="INN">ИНН</label>
                                    <div>
                                        <input id="INN" name="INN" class="col-xs-12" type="text" [(ngModel)]="teacher.INN"/>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="SNILS">СНИЛС</label>
                                    <div>
                                        <input id="SNILS" name="SNILS" class="col-xs-12" type="text" [(ngModel)]="teacher.SNILS"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div id="workInfo" class="tab-pane fade">
                        <div class="row">
                            <div class="col-xs-12">
                                <h4 class="header blue bolder smaller">Сведения о трудоустройстве</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="faculty">Факультет</label>
                                    <div [ngStyle]="{'border': (faculty.valid && !(isCreateNew && faculty.valid && faculty.pristine))? '':'1px solid red'}">
                                        <p-dropdown id="faculty" [options]="facultiesList" [style]="{'width': '100%'}" [(ngModel)]="teacher.Faculty"
                                                    filter="filter" #faculty="ngModel"  [required]="true"></p-dropdown>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="specialty">Специальность</label>
                                    <div>
                                        <input id="specialty" name="specialty" class="col-xs-12" type="text" [(ngModel)]="teacher.Speciality"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="AcademicDegree">Ученая степень</label>
                                    <div>
                                        <p-dropdown id="AcademicDegree" [options]="academicDegreeList" [style]="{'width': '100%'}" [(ngModel)]="teacher.AcademicDegree"
                                                    [filter]="filter" [required]="true"></p-dropdown>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="AcademicTitle">Ученое звание</label>
                                    <div>
                                        <p-dropdown id="AcademicTitle" [options]="academicTitleList" [style]="{'width': '100%'}" [(ngModel)]="teacher.AcademicTitle"
                                                    [filter]="filter" [required]="true"></p-dropdown>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-6 col-md-4">
                                <div class="form-group">
                                    <label for="beginDate">Дата начала работы</label>
                                    <div>
                                        <input id="beginDate" name="beginDate" class="col-xs-12" type="date" [(ngModel)]="teacher.BeginDate"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="load" class="tab-pane fade">
                        <div class="row">
                            <div class="col-xs-12">
                                <div class="widget-box transparent">
                                    <div class="widget-header widget-header-flat">
                                        <h4 class="widget-title blue bolder smaller">
                                            <i class="ace-icon fa fa-clock-o orange"></i>
                                            Аудиторные занятия (в часах)
                                        </h4>
                                        <!--<h4 class="widget-title lighter">-->
                                            <!--<i class="ace-icon fa fa-clock-o orange"></i>-->
                                            <!--Аудиторные занятия (в часах)-->
                                        <!--</h4>-->

                                        <div class="widget-toolbar">
                                            <a href="#" data-action="collapse">
                                                <i class="ace-icon fa fa-chevron-up"></i>
                                            </a>
                                        </div>
                                    </div>

                                    <div class="widget-body">
                                        <div class="widget-main no-padding">
                                            <div class="col-xs-12">
                                                <table class="table table-bordered table-striped table-hover">
                                                    <thead class="thin-border-bottom">
                                                    <tr>
                                                        <th width="60%">
                                                            Наименование
                                                        </th>
                                                        <th width="14%">
                                                            Кол-во часов
                                                        </th>
                                                        <th width="8%">
                                                            Коэффициент
                                                        </th>
                                                        <th width="8%">
                                                            <i class="ace-icon fa fa-caret-right blue"></i> Итого
                                                        </th>
                                                    </tr>
                                                    </thead>
                                                    <tfoot style="background: #75ABD7">
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td><b>Всего:</b></td>
                                                        <td align="center"><b>{{teacherWorkSumm}}</b></td>
                                                    </tr>
                                                    </tfoot>

                                                    <tbody>
                                                    <tr *ngFor="let work of teacherWorksList">
                                                        <td>{{work.TeachersTypesWork.Name}}</td>
                                                        <td align="center">{{work.HoursWork}}</td>
                                                        <td align="center">{{work.TeachersTypesWork.PercentLoad}}</td>
                                                        <td align="center">{{work.HoursWork * (work.TeachersTypesWork.PercentLoad * 100) / 100}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div><!-- /.widget-main -->
                                    </div><!-- /.widget-body -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div><!-- /.col -->
</div><!-- /.row -->
